// >>> [ADDED] NEW FILE: src/i18n/I18nContext.js
import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';

// ì‚¬ì „ì€ í•œ íŒŒì¼ì— ëª°ì•„ì„œ ê´€ë¦¬ (ìš”êµ¬: ë¯¸ë¦¬ ì¤€ë¹„ëœ ë²ˆì—­ ì ìš©, ìžë™ë²ˆì—­ X)
const DICT = {
  ko: {
    LOGIN: 'ë¡œê·¸ì¸',
    SIGNUP: 'íšŒì›ê°€ìž…',
    EMAIL: 'ì´ë©”ì¼',
    PASSWORD: 'ë¹„ë°€ë²ˆí˜¸',
    PASSWORD_MIN: 'ë¹„ë°€ë²ˆí˜¸ (8ìžë¦¬ ì´ìƒ)',
    INPUT_REQUIRED: 'ìž…ë ¥ í•„ìš”',
    ENTER_ID_PW: 'ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.',
    INVALID_CREDENTIALS: 'ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.',
    TRY_AGAIN: 'ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
    START: 'ì‹œìž‘',
    HOME_MEAL: 'ðŸ¥— ì‹ë‹¨ ê¸°ë¡',
    HOME_DATA: 'ðŸ‘€ í•œëˆˆì—',
    PROFILE: 'PROFILE',
    QUEST: 'QUEST',
    RANKING: 'RANKING',
    SETTINGS: 'SETTINGS',
    CAMERA: 'CAMERA',
    CAMERA_HINT: 'ì ‘ì‹œê°€ ì¤‘ì•™ì— ì˜¤ë„ë¡ ë§žì¶°ì£¼ì„¸ìš”',
    PERMISSION_CAMERA_NEEDED: 'ì¹´ë©”ë¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤',
    PERMISSION_ALLOW: 'ê¶Œí•œ í—ˆìš©',
    SAVE: 'ì €ìž¥',
    RETAKE: 'ë‹¤ì‹œ ì°ê¸°',
    RESULT: 'ë¶„ì„ ê²°ê³¼',
    GOAL_SETUP: 'ëª©í‘œ ì„¤ì •',
    LATER: 'ë‚˜ì¤‘ì— ì„¤ì •',
    CONFIRM: 'í™•ì¸',
    CANCEL: 'ì·¨ì†Œ',
    EDIT: 'ìˆ˜ì •',
    EDIT_DONE: 'ìˆ˜ì • ì™„ë£Œ',
    FETCHING: 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦',
    NO_LIST: 'í‘œì‹œí•  í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.',
    LOGOUT: 'ë¡œê·¸ì•„ì›ƒ',
    LANGUAGE: 'ì–¸ì–´',
    SOUND: 'íš¨ê³¼ìŒ',
    ON: 'ì¼œê¸°',
    OFF: 'ë„ê¸°',
    RECOVERY: 'ë¹„ë°€ë²ˆí˜¸ ë³µêµ¬',
    RECOVERY_SETUP: 'ë³´ì•ˆì§ˆë¬¸ ì„¤ì •',
    RECOVERY_START_DESC: 'ì•„ì´ë””ë¥¼ ìž…ë ¥í•˜ë©´ ì§ˆë¬¸ 2ê°œê°€ ì¶œì œë©ë‹ˆë‹¤.',
    RECOVERY_ID: 'ì•„ì´ë””(ì´ë©”ì¼)',
    RECOVERY_START: 'ì§ˆë¬¸ ë°›ê¸°',
    RECOVERY_ANSWER: 'ì •ë‹µ ì œì¶œ',
    RECOVERY_NEW_PW: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸',
    RECOVERY_RESET: 'ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì •',
    RECOVERY_REGISTER_DESC: 'ì§ˆë¬¸ 3ê°œë¥¼ ì„ íƒí•˜ê³  ì •ë‹µ/í™•ì¸ìœ¼ë¡œ ë“±ë¡í•˜ì„¸ìš”.',
    QUESTION_BIRTHPLACE: 'ë‚´ê°€ íƒœì–´ë‚œ ê³³ì€?',
    QUESTION_ELEMENTARY_SCHOOL: 'ë‚´ê°€ ë‹¤ë‹ˆë˜ ì´ˆë“±í•™êµëŠ”?',
    QUESTION_PET_NAME: 'ë‚´ ì• ì™„ë™ë¬¼ ì´ë¦„ì€?',
    QUESTION_MOTHER_NAME: 'ë‚´ ì–´ë¨¸ë‹ˆ ì´ë¦„ì€?',
    ANSWER: 'ì •ë‹µ',
    ANSWER_CONFIRM: 'ì •ë‹µ í™•ì¸',
    SEND: 'ì „ì†¡',
    WALK: 'ê±·ê¸°',
    PUSHUP: 'í‘¸ì‹œì—…',
    SQUAT: 'ìŠ¤ì¿¼íŠ¸',
    DIET: 'ì‹ë‹¨',
    DAILY_QUESTS: 'ì˜¤ëŠ˜ì˜ ì¼ì¼ í€˜ìŠ¤íŠ¸',
    REWARD: 'ë³´ìƒ',
    ALL_CLEARED_BONUS: 'ëª¨ë‘ ì™„ë£Œ ë³´ë„ˆìŠ¤',
    NEW: 'ì‹ ê·œ',
  },
  en: {
    LOGIN: 'Login',
    SIGNUP: 'Sign Up',
    EMAIL: 'Email',
    PASSWORD: 'Password',
    PASSWORD_MIN: 'Password (min 8 chars)',
    INPUT_REQUIRED: 'Input required',
    ENTER_ID_PW: 'Please enter email and password.',
    INVALID_CREDENTIALS: 'Invalid email or password.',
    TRY_AGAIN: 'Please try again.',
    START: 'Start',
    HOME_MEAL: 'ðŸ¥— Meals',
    HOME_DATA: 'ðŸ‘€ Overview',
    PROFILE: 'PROFILE',
    QUEST: 'QUEST',
    RANKING: 'RANKING',
    SETTINGS: 'SETTINGS',
    CAMERA: 'CAMERA',
    CAMERA_HINT: 'Center the plate in the frame',
    PERMISSION_CAMERA_NEEDED: 'Camera permission needed',
    PERMISSION_ALLOW: 'Allow',
    SAVE: 'Save',
    RETAKE: 'Retake',
    RESULT: 'Result',
    GOAL_SETUP: 'Goal Setup',
    LATER: 'Set later',
    CONFIRM: 'Confirm',
    CANCEL: 'Cancel',
    EDIT: 'Edit',
    EDIT_DONE: 'Saved',
    FETCHING: 'Loadingâ€¦',
    NO_LIST: 'No items to show.',
    LOGOUT: 'Log out',
    LANGUAGE: 'Language',
    SOUND: 'SFX',
    ON: 'On',
    OFF: 'Off',
    RECOVERY: 'Password Recovery',
    RECOVERY_SETUP: 'Security Q&A',
    RECOVERY_START_DESC: 'Enter your email to get 2 questions.',
    RECOVERY_ID: 'Email',
    RECOVERY_START: 'Get questions',
    RECOVERY_ANSWER: 'Submit answers',
    RECOVERY_NEW_PW: 'New password',
    RECOVERY_RESET: 'Reset password',
    RECOVERY_REGISTER_DESC: 'Pick 3 questions and register answer/confirm.',
    QUESTION_BIRTHPLACE: 'Where was I born?',
    QUESTION_ELEMENTARY_SCHOOL: 'My elementary school?',
    QUESTION_PET_NAME: 'My petâ€™s name?',
    QUESTION_MOTHER_NAME: 'My motherâ€™s name?',
    ANSWER: 'Answer',
    ANSWER_CONFIRM: 'Confirm',
    SEND: 'Send',
    WALK: 'Walk',
    PUSHUP: 'Push-ups',
    SQUAT: 'Squats',
    DIET: 'Diet',
    DAILY_QUESTS: 'Todayâ€™s Daily Quests',
    REWARD: 'Reward',
    ALL_CLEARED_BONUS: 'All-clear bonus',
    NEW: 'New',
  },
  ja: {
    LOGIN: 'ãƒ­ã‚°ã‚¤ãƒ³',
    SIGNUP: 'æ–°è¦ç™»éŒ²',
    EMAIL: 'ãƒ¡ãƒ¼ãƒ«',
    PASSWORD: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
    PASSWORD_MIN: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ8æ–‡å­—ä»¥ä¸Šï¼‰',
    INPUT_REQUIRED: 'å…¥åŠ›å¿…é ˆ',
    ENTER_ID_PW: 'ãƒ¡ãƒ¼ãƒ«ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
    INVALID_CREDENTIALS: 'ãƒ¡ãƒ¼ãƒ«ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚',
    TRY_AGAIN: 'ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚',
    START: 'é–‹å§‹',
    HOME_MEAL: 'ðŸ¥— é£Ÿäº‹è¨˜éŒ²',
    HOME_DATA: 'ðŸ‘€ ä¸€è¦§',
    PROFILE: 'PROFILE',
    QUEST: 'QUEST',
    RANKING: 'RANKING',
    SETTINGS: 'SETTINGS',
    CAMERA: 'ã‚«ãƒ¡ãƒ©',
    CAMERA_HINT: 'çš¿ãŒä¸­å¤®ã«æ¥ã‚‹ã‚ˆã†ã«åˆã‚ã›ã¦ãã ã•ã„',
    PERMISSION_CAMERA_NEEDED: 'ã‚«ãƒ¡ãƒ©æ¨©é™ãŒå¿…è¦ã§ã™',
    PERMISSION_ALLOW: 'è¨±å¯',
    SAVE: 'ä¿å­˜',
    RETAKE: 'æ’®ã‚Šç›´ã—',
    RESULT: 'çµæžœ',
    GOAL_SETUP: 'ç›®æ¨™è¨­å®š',
    LATER: 'å¾Œã§è¨­å®š',
    CONFIRM: 'ç¢ºèª',
    CANCEL: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    EDIT: 'ç·¨é›†',
    EDIT_DONE: 'ä¿å­˜ã—ã¾ã—ãŸ',
    FETCHING: 'èª­ã¿è¾¼ã¿ä¸­â€¦',
    NO_LIST: 'è¡¨ç¤ºã™ã‚‹é …ç›®ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚',
    LOGOUT: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ',
    LANGUAGE: 'è¨€èªž',
    SOUND: 'åŠ¹æžœéŸ³',
    ON: 'ã‚ªãƒ³',
    OFF: 'ã‚ªãƒ•',
    RECOVERY: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¾©æ—§',
    RECOVERY_SETUP: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è³ªå•',
    RECOVERY_START_DESC: 'ãƒ¡ãƒ¼ãƒ«ã‚’å…¥åŠ›ã™ã‚‹ã¨2å•ãŒå‡ºé¡Œã•ã‚Œã¾ã™ã€‚',
    RECOVERY_ID: 'ãƒ¡ãƒ¼ãƒ«',
    RECOVERY_START: 'è³ªå•ã‚’å–å¾—',
    RECOVERY_ANSWER: 'å›žç­”é€ä¿¡',
    RECOVERY_NEW_PW: 'æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰',
    RECOVERY_RESET: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®š',
    RECOVERY_REGISTER_DESC: 'è³ªå•3ã¤ã‚’é¸ã³ã€å›žç­”/ç¢ºèªã§ç™»éŒ²ã—ã¾ã™ã€‚',
    QUESTION_BIRTHPLACE: 'ç”Ÿã¾ã‚ŒãŸå ´æ‰€ã¯ï¼Ÿ',
    QUESTION_ELEMENTARY_SCHOOL: 'å°å­¦æ ¡ã¯ï¼Ÿ',
    QUESTION_PET_NAME: 'ãƒšãƒƒãƒˆã®åå‰ã¯ï¼Ÿ',
    QUESTION_MOTHER_NAME: 'æ¯ã®åå‰ã¯ï¼Ÿ',
    ANSWER: 'å›žç­”',
    ANSWER_CONFIRM: 'ç¢ºèª',
    SEND: 'é€ä¿¡',
    WALK: 'ã‚¦ã‚©ãƒ¼ã‚­ãƒ³ã‚°',
    PUSHUP: 'è…•ç«‹ã¦ä¼ã›',
    SQUAT: 'ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ',
    DIET: 'é£Ÿäº‹',
    DAILY_QUESTS: 'æœ¬æ—¥ã®ãƒ‡ã‚¤ãƒªãƒ¼ã‚¯ã‚¨ã‚¹ãƒˆ',
    REWARD: 'å ±é…¬',
    ALL_CLEARED_BONUS: 'å…¨é”æˆãƒœãƒ¼ãƒŠã‚¹',
    NEW: 'æ–°è¦',
  },
  zh: {
    LOGIN: 'ç™»å½•',
    SIGNUP: 'æ³¨å†Œ',
    EMAIL: 'é‚®ç®±',
    PASSWORD: 'å¯†ç ',
    PASSWORD_MIN: 'å¯†ç ï¼ˆè‡³å°‘8ä½ï¼‰',
    INPUT_REQUIRED: 'éœ€è¦è¾“å…¥',
    ENTER_ID_PW: 'è¯·è¾“å…¥é‚®ç®±å’Œå¯†ç ã€‚',
    INVALID_CREDENTIALS: 'é‚®ç®±æˆ–å¯†ç ä¸æ­£ç¡®ã€‚',
    TRY_AGAIN: 'è¯·é‡è¯•ã€‚',
    START: 'å¼€å§‹',
    HOME_MEAL: 'ðŸ¥— é¥®é£Ÿè®°å½•',
    HOME_DATA: 'ðŸ‘€ ä¸€è§ˆ',
    PROFILE: 'PROFILE',
    QUEST: 'QUEST',
    RANKING: 'RANKING',
    SETTINGS: 'SETTINGS',
    CAMERA: 'ç›¸æœº',
    CAMERA_HINT: 'è¯·å°†é¤ç›˜å¯¹å‡†ç”»é¢ä¸­å¿ƒ',
    PERMISSION_CAMERA_NEEDED: 'éœ€è¦ç›¸æœºæƒé™',
    PERMISSION_ALLOW: 'å…è®¸',
    SAVE: 'ä¿å­˜',
    RETAKE: 'é‡æ‹',
    RESULT: 'ç»“æžœ',
    GOAL_SETUP: 'ç›®æ ‡è®¾ç½®',
    LATER: 'ç¨åŽè®¾ç½®',
    CONFIRM: 'ç¡®å®š',
    CANCEL: 'å–æ¶ˆ',
    EDIT: 'ç¼–è¾‘',
    EDIT_DONE: 'å·²ä¿å­˜',
    FETCHING: 'åŠ è½½ä¸­â€¦',
    NO_LIST: 'æ— å¯æ˜¾ç¤ºå†…å®¹ã€‚',
    LOGOUT: 'é€€å‡ºç™»å½•',
    LANGUAGE: 'è¯­è¨€',
    SOUND: 'éŸ³æ•ˆ',
    ON: 'å¼€',
    OFF: 'å…³',
    RECOVERY: 'æ‰¾å›žå¯†ç ',
    RECOVERY_SETUP: 'å®‰å…¨é—®é¢˜',
    RECOVERY_START_DESC: 'è¾“å…¥é‚®ç®±åŽå°†å‡ºçŽ°2ä¸ªé—®é¢˜ã€‚',
    RECOVERY_ID: 'é‚®ç®±',
    RECOVERY_START: 'èŽ·å–é—®é¢˜',
    RECOVERY_ANSWER: 'æäº¤ç­”æ¡ˆ',
    RECOVERY_NEW_PW: 'æ–°å¯†ç ',
    RECOVERY_RESET: 'é‡ç½®å¯†ç ',
    RECOVERY_REGISTER_DESC: 'é€‰æ‹©3ä¸ªé—®é¢˜å¹¶ç™»è®°ç­”æ¡ˆ/ç¡®è®¤ã€‚',
    QUESTION_BIRTHPLACE: 'æˆ‘å‡ºç”Ÿåœ¨ï¼Ÿ',
    QUESTION_ELEMENTARY_SCHOOL: 'æˆ‘çš„å°å­¦ï¼Ÿ',
    QUESTION_PET_NAME: 'æˆ‘çš„å® ç‰©åå­—ï¼Ÿ',
    QUESTION_MOTHER_NAME: 'æˆ‘æ¯äº²çš„åå­—ï¼Ÿ',
    ANSWER: 'ç­”æ¡ˆ',
    ANSWER_CONFIRM: 'ç¡®è®¤',
    SEND: 'å‘é€',
    WALK: 'æ­¥è¡Œ',
    PUSHUP: 'ä¿¯å§æ’‘',
    SQUAT: 'æ·±è¹²',
    DIET: 'é¥®é£Ÿ',
    DAILY_QUESTS: 'ä»Šå¤©çš„æ—¥å¸¸ä»»åŠ¡',
    REWARD: 'å¥–åŠ±',
    ALL_CLEARED_BONUS: 'å…¨å®Œæˆå¥–åŠ±',
    NEW: 'æ–°',
  },
};

const Ctx = createContext(null);
export const useI18n = () => useContext(Ctx);

export function I18nProvider({ children }) {
  const [lang, setLang] = useState('ko');

  useEffect(() => {
    (async () => {
      const v = await AsyncStorage.getItem('@i18n/lang');
      if (v) setLang(v);
    })();
  }, []);

  const t = useMemo(() => {
    const table = DICT[lang] || DICT.ko;
    return (key) => {
      const k = String(key || '').trim();
      return table[k] || k;
    };
  }, [lang]);

  const value = useMemo(() => ({
    lang,
    t,
    setLang: async (next) => {
      const v = ['ko','en','ja','zh'].includes(next) ? next : 'ko';
      setLang(v);
      try { await AsyncStorage.setItem('@i18n/lang', v); } catch {}
    }
  }), [lang, t]);

  return <Ctx.Provider value={value}>{children}</Ctx.Provider>;
}
